<html>
  <body>
    <h1>My App</h1>
    <button>First</button>
    <div id="first"></div>

    <button>Second</button>
    <div id="second"></div>

    <script type="module">
      import { fetchAsyncUI } from './public/utils/fetchAsyncUI.js';

      const createMountAndExecuteHandler = (...fetchArgs) => (mountElement) => (...hydrateArgs) => (event) => {
        // create the bootstrap helper based on the fetch arguments
        fetchAsyncUI({
          fetchConfig: fetchArgs,
          mountElement,
          hydrateArgs,
        })
          // returns a promise, so when resolved, `fetchAsyncUI` returns a helper
          .then(asyncUI => {
            return asyncUI
              .asyncMount()
          })
          .then(result => {
            // this `.then()` is likely only for info only, not required
            console.log('Successfully called bootstrap');
            console.log('bootstrap function returned value', result);
          })
          .catch(error => {
            console.error('There was an error loading your module', error);
          });
      }

      const firstHandler = createMountAndExecuteHandler
        ('/api/content?title=First Title')
        (document.getElementById('first'))
        (4, 3);

      const secondHandler = createMountAndExecuteHandler
        ('/api/content?title=Second Title')
        (document.getElementById('second'))
        (7, 10, 23, 87);

      document.getElementsByTagName('button')?.[0]?.addEventListener('click', firstHandler);
      document.getElementsByTagName('button')?.[1]?.addEventListener('click', secondHandler);

    </script>
  </body>
</html>